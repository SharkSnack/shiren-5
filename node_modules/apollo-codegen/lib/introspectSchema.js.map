{"version":3,"sources":["../src/introspectSchema.js"],"names":["schemaContents","schema","introspect","schemaPath","outputPath","existsSync","readFileSync","toString","result","errors","writeFileSync","introspectSchema"],"mappings":";;;;;;;;;;;;;;;;;;;;wEAOO,iBAA0BA,cAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AACCC,kBADD,GACU,6BAAe,oBAAMD,cAAN,CAAf,CADV;AAAA;AAAA,mBAEQ,sBAAQC,MAAR,gCAFR;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAeC,U;;;;;AAPtB;;;;AAEA;;AACA;;AAEA;;;;;yEAOe,kBAAgCC,UAAhC,EAA4CC,UAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACR,aAAGC,UAAH,CAAcF,UAAd,CADQ;AAAA;AAAA;AAAA;;AAAA,kBAEL,sBAAe,oCAAmCA,UAAW,EAA7D,CAFK;;AAAA;AAKPH,0BALO,GAKU,aAAGM,YAAH,CAAgBH,UAAhB,EAA4BI,QAA5B,EALV;AAAA;AAAA,mBAMQL,WAAWF,cAAX,CANR;;AAAA;AAMPQ,kBANO;;AAAA,iBAQTA,OAAOC,MARE;AAAA;AAAA;AAAA;;AAAA,kBASL,sBAAe,yCAAwCD,OAAOC,MAAO,EAArE,CATK;;AAAA;;AAYb,yBAAGC,aAAH,CAAiBN,UAAjB,EAA6B,yBAAeI,MAAf,EAAuB,IAAvB,EAA6B,CAA7B,CAA7B;;AAZa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;WAAeG,gB;;;;SAAAA,gB","file":"introspectSchema.js","sourcesContent":["import fs from 'fs';\n\nimport { buildASTSchema, graphql, parse } from 'graphql';\nimport { introspectionQuery } from 'graphql/utilities';\n\nimport { ToolError } from './errors'\n\nexport async function introspect(schemaContents) {\n  const schema = buildASTSchema(parse(schemaContents));\n  return await graphql(schema, introspectionQuery);\n}\n\nexport default async function introspectSchema(schemaPath, outputPath) {\n  if (!fs.existsSync(schemaPath)) {\n    throw new ToolError(`Cannot find GraphQL schema file: ${schemaPath}`);\n  }\n\n  const schemaContents = fs.readFileSync(schemaPath).toString();\n  const result = await introspect(schemaContents);\n\n  if (result.errors) {\n    throw new ToolError(`Errors in introspection query result: ${result.errors}`);\n  }\n\n  fs.writeFileSync(outputPath, JSON.stringify(result, null, 2));\n}\n"]}