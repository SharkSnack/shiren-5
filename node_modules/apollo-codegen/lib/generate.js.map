{"version":3,"sources":["../src/generate.js"],"names":["generate","inputPaths","schemaPath","outputPath","target","options","schema","document","context","output","writeFileSync","console","log"],"mappings":";;;;;;;;;;kBAWwBA,Q;;AAXxB;;;;AAEA;;AACA;;AACA;;AACA;;AACA;;;;AACA;;AACA;;AACA;;;;AAEe,SAASA,QAAT,CAAkBC,UAAlB,EAA8BC,UAA9B,EAA0CC,UAA1C,EAAsDC,MAAtD,EAA8DC,OAA9D,EAAuE;AACpF,MAAMC,SAAS,yBAAWJ,UAAX,CAAf;;AAEA,MAAMK,WAAW,yCAA2BN,UAA3B,CAAjB;;AAEA,yCAAsBK,MAAtB,EAA8BC,QAA9B;;AAEA,MAAMC,UAAU,8BAAYF,MAAZ,EAAoBC,QAApB,CAAhB;AACA,wBAAcC,OAAd,EAAuBH,OAAvB;;AAEA,MAAII,eAAJ;AACA,UAAQL,MAAR;AACE,SAAK,MAAL;AACEK,eAAS,+BAAgBD,OAAhB,CAAT;AACA;AACF,SAAK,IAAL;AACA,SAAK,YAAL;AACEC,eAAS,gCAAyBD,OAAzB,CAAT;AACA;AACF,SAAK,MAAL;AACEC,eAAS,0BAAmBD,OAAnB,CAAT;AACA;AACF,SAAK,OAAL;AACA;AACEC,eAAS,2BAAoBD,OAApB,CAAT;AACA;AAdJ;;AAiBA,MAAIL,UAAJ,EAAgB;AACd,iBAAGO,aAAH,CAAiBP,UAAjB,EAA6BM,MAA7B;AACD,GAFD,MAEO;AACLE,YAAQC,GAAR,CAAYH,MAAZ;AACD;AACF","file":"generate.js","sourcesContent":["import fs from 'fs'\n\nimport { ToolError, logError } from './errors'\nimport { loadSchema,  loadAndMergeQueryDocuments } from './loading'\nimport { validateQueryDocument } from './validation'\nimport { compileToIR } from './compilation'\nimport serializeToJSON from './serializeToJSON'\nimport { generateSource as generateSwiftSource } from './swift'\nimport { generateSource as generateTypescriptSource } from './typescript'\nimport { generateSource as generateFlowSource } from './flow'\n\nexport default function generate(inputPaths, schemaPath, outputPath, target, options) {\n  const schema = loadSchema(schemaPath);\n\n  const document = loadAndMergeQueryDocuments(inputPaths);\n\n  validateQueryDocument(schema, document);\n\n  const context = compileToIR(schema, document);\n  Object.assign(context, options);\n\n  let output;\n  switch (target) {\n    case 'json':\n      output = serializeToJSON(context);\n      break;\n    case 'ts':\n    case 'typescript':\n      output = generateTypescriptSource(context);\n      break;\n    case 'flow':\n      output = generateFlowSource(context);\n      break;\n    case 'swift':\n    default:\n      output = generateSwiftSource(context);\n      break;\n  }\n\n  if (outputPath) {\n    fs.writeFileSync(outputPath, output);\n  } else {\n    console.log(output);\n  }\n}\n"]}